<%= form_with scope: :player, url: players_path, html: {:id => "demo-form2", "data-parsley-validate" => "", :class => "form-horizontal form-label-left", :novalidate => ""}, local: true do |form| %>
  <div class="item form-group">
    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="myteam">
    </label>
    <div class="col-md-6 col-sm-6 col-xs-12">
      <h2> Заполните информацию игрового профиля</h2>
    </div>
  </div>
  <%= form.hidden_field :id, value: params[:format] %>
  <%= render partial: "player", locals: {form: form} %>
  <div class="item form-group checkboxes" id="checkboxes">
    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="myteam">Выберите команды:
    </label>
    <div class="col-md-6 col-sm-6 col-xs-12" style="max-height:100px; overflow:auto;">
      <%= form.collection_check_boxes :team_ids, @user.teams, :id, :name do |b| %>
        <%= b.check_box :required => "" %>
        <%= b.label %>
        <br>
      <% end %>
    </div>
  </div>
  <div class="form-group">
    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="myteam">
    </label>
    <div class="col-md-6 col-sm-6 col-xs-12">
      <%= form.submit "Создать", :class => "btn btn-success", :onclick => "checkDuplicate()" %>
      <a onclick="javascript:history.back(); return false;" class="btn btn-success"> Отмена
      </a>
    </div>
  </div>
<% end %>

<script>
    function checkDuplicate() {
        setTimeout(function () {
            var seen = {};
            $('div.checkboxes > div').each(function () {
                var txt = $(this).text();
                if (seen[txt])
                    $(this).remove();
                else
                    seen[txt] = true;
            });
        }, 30)
    }
</script>